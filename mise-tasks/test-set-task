#!/usr/bin/env bash
#MISE description="Set active task in UI (test harness)"
set -euo pipefail

TASK_ID="${1:-}"

if [[ -z "$TASK_ID" ]]; then
    echo "Usage: mise run test-set-task <task-id>"
    exit 1
fi

if ! nc -z localhost 19385 2>/dev/null; then
    echo "Test server not running. Run: mise run test-start"
    exit 1
fi

echo "{\"cmd\":\"set_task\",\"taskId\":\"$TASK_ID\"}" | nc -w 2 localhost 19385
